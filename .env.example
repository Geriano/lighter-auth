# =============================================================================
# Environment Variables Template for lighter-auth
# =============================================================================
# Copy this file to .env and update values for local development
# DO NOT commit .env to version control!
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose up
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_USER=lighter
DB_PASSWORD=lighter
DB_NAME=lighter_auth
DB_HOST=localhost
DB_PORT=5432

# Full database URL (used by application)
# Format: postgres://user:password@host:port/database
# This will be auto-constructed in docker-compose.yml
# DATABASE_URL=postgres://lighter:lighter@localhost:5432/lighter_auth

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_MAX_MEMORY=256mb
REDIS_PASSWORD=

# Full Redis URL (used by application)
# Format: redis://[:password@]host:port[/database]
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_PORT=8080
APP_HOST=0.0.0.0
APP_ENVIRONMENT=development

# Logging level: trace, debug, info, warn, error
RUST_LOG=info

# Show full backtraces on errors (1=yes, 0=no)
RUST_BACKTRACE=1

# -----------------------------------------------------------------------------
# Monitoring Configuration
# -----------------------------------------------------------------------------
# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin
GRAFANA_ROOT_URL=http://localhost:3000
GRAFANA_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Security (Production Only)
# -----------------------------------------------------------------------------
# TLS Certificate paths (optional)
# TLS_CERT=/path/to/cert.pem
# TLS_KEY=/path/to/key.pem

# Session configuration
# SESSION_TIMEOUT=3600  # seconds

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
# Enable/disable features for development
METRICS_ENABLED=true

# Hot-reload delay (milliseconds)
# CARGO_WATCH_DELAY=500

# -----------------------------------------------------------------------------
# Docker Compose Profiles
# -----------------------------------------------------------------------------
# Uncomment to enable specific services:
# COMPOSE_PROFILES=dev      # Development mode (auth-dev with hot-reload)
# COMPOSE_PROFILES=prod     # Production mode (auth-prod optimized build)
# COMPOSE_PROFILES=tools    # Include migration runner

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. For development, use: docker-compose --profile dev up
# 2. For production, use: docker-compose --profile prod up
# 3. Run migrations with: docker-compose --profile tools run --rm migration
# 4. Access services:
#    - Application: http://localhost:8080
#    - Prometheus: http://localhost:9090
#    - Grafana: http://localhost:3000 (admin/admin)
#    - Swagger UI: http://localhost:8080/docs/
# 5. Health checks:
#    - Application: curl http://localhost:8080/health
#    - Metrics: curl http://localhost:8080/metrics
